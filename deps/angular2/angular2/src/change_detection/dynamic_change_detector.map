{"version":3,"sources":["@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/5","dynamic_change_detector.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/164","@traceur/generated/TemplateParser/18","@traceur/generated/TemplateParser/23","@traceur/generated/TemplateParser/168","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/8"],"names":[],"mappings":"AAAA,KAAK,SAAS,AAAC,4VAAuC,UAAS,SAAQ;;ACAvE,AAAI,IAAA,CAAA,YAAW,0DAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8MpC,SAAS,OAAK,CAAE,CAAA,CAAG,CAAA,CAAA,CAAG;AACpB,OAAI,CAAA,IAAM,EAAA;AAAG,WAAO,KAAG,CAAC;AAAA,AACxB,OAAI,CAAA,WAAa,OAAK,CAAA,EAAK,CAAA,CAAA,WAAa,OAAK,CAAA,EAAK,CAAA,CAAA,GAAK,EAAA;AAAG,WAAO,KAAG,CAAC;AAAA,AACrE,OAAI,CAAC,CAAA,IAAM,EAAA,CAAC,GAAK,EAAC,CAAA,IAAM,EAAA,CAAC;AAAG,WAAO,KAAG,CAAC;AAAA,AACvC,SAAO,MAAI,CAAC;EACd;AAAA,ACnNA,OAAO;AACD,UAAM,GCDZ,SAAS,IAAG,CAAG;ACAf,aAAoB,KAAG,OAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,cAAoB,KAAG,QAAkB,CAAC;AAA1C,oBAAoB,KAAG,cAAkB,CAAC;AAA1C,sBAAoB,KAAG,gBAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,kBAAoB,KAAG,YAAkB,CAAC;AAA1C,iBAAoB,KAAG,WAAkB,CAAC;AAA1C,uBAAoB,KAAG,iBAAkB,CAAC;IDElC,CAFR,UAAS,IAAG,CAAG;ACAf,kCAAoB,KAAG,4BAAkB,CAAC;IDElC,CAFR,UAAS,IAAG,CAAG;ACAf,6BAAoB,KAAG,uBAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,0BAAoB,KAAG,oBAAkB,CAAC;AAA1C,mBAAoB,KAAG,aAAkB,CAAC;AAA1C,oBAAoB,KAAG,cAAkB,CAAC;IDElC,CAFR,UAAS,IAAG,CAAG;ACAf,mBAAoB,KAAG,aAAkB,CAAC;IDElC,CAFR,UAAS,IAAG,CAAG;ACAf,sBAAoB,KAAG,gBAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,kBAAoB,KAAG,YAAkB,CAAC;AAA1C,uBAAoB,KAAG,iBAAkB,CAAC;AAA1C,2BAAoB,KAAG,qBAAkB,CAAC;AAA1C,gCAAoB,KAAG,0BAAkB,CAAC;AAA1C,wBAAoB,KAAG,kBAAkB,CAAC;AAA1C,iCAAoB,KAAG,2BAAkB,CAAC;AAA1C,+BAAoB,KAAG,yBAAkB,CAAC;AAA1C,+BAAoB,KAAG,yBAAkB,CAAC;AAA1C,mCAAoB,KAAG,6BAAkB,CAAC;AAA1C,mCAAoB,KAAG,6BAAkB,CAAC;AAA1C,8BAAoB,KAAG,wBAAkB,CAAC;AAA1C,0BAAoB,KAAG,oBAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,qBAAoB,KAAG,eAAkB,CAAC;AAA1C,uBAAoB,KAAG,iBAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,6CAAoB,KAAG,uCAAkB,CAAC;AAA1C,2BAAoB,KAAG,qBAAkB,CAAC;IDElC,CDDuB;AACzB,UAAM;4BGFY,CAAA,SAAQ,AAAC,2BCAjC,SAAS,QAAO;AACN,AAAI,UAAA,wBL2BP,SAAM,sBAAoB,CAOnB,UAAS,AAAI,CAAG,CAAA,UAAS,AAAI,CAAG,CAAA,YAAW,AAAkB,CAAG;AMnC9E,eAAK,cAAc,YCAnB,CAAA,MAAK,KAAK,iBPmC+B,IAAE,eQnC3C,CAAA,MAAK,YAAY,ARmC0C,CAAA,IAAG,CAAE,YAAU,CAAC,AQnCvC,CFAE,CAAA;ANoClC,ASpCJ,wBAAc,iBAAiB,AAAC,uBAAkB,KAAK,MAAmB,CToC/D;AACP,aAAG,WAAW,EAAI,WAAS,CAAC;AAC5B,aAAG,WAAW,EAAI,WAAS,CAAC;AAE5B,aAAG,OAAO,EAAI,CAAA,WAAU,gBAAgB,AAAC,CAAC,YAAW,OAAO,EAAI,EAAA,CAAC,CAAC;AAClE,oBAAU,KAAK,AAAC,CAAC,IAAG,OAAO,CAAG,cAAY,CAAC,CAAC;AAE5C,aAAG,QAAQ,EAAI,CAAA,WAAU,gBAAgB,AAAC,CAAC,YAAW,OAAO,EAAI,EAAA,CAAC,CAAC;AAEnE,aAAG,OAAO,EAAI,aAAW,CAAC;QAC5B,AK7CgD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AL8C5C,mBAAS,CAAT,UAAW,OAAM,AAAI,CAAG;AMhD1B,iBAAK,cAAc,SCAnB,CAAA,MAAK,KAAK,KDA4B,CAAA;ANiDlC,eAAG,OAAO,CAAE,CAAA,CAAC,EAAI,QAAM,CAAC;UAC1B;AAEA,+BAAqB,CAArB,UAAuB,aAAY,AAAQ;AMpD7C,iBAAK,cAAc,eCAnB,CAAA,MAAK,KAAK,SDA4B,CAAA;ANqDlC,AAAI,cAAA,CAAA,MAAK,EUrDb,CAAA,MAAK,KAAK,AAAC,CVqDwB,IAAG,OAAO,CQrD7C,CAAA,MAAK,YAAY,ARqDF,CAAA,IAAG,CAAE,YAAU,CAAC,AQrDK,CEAY,AVqDH,CAAC;AAE1C,AAAI,cAAA,CAAA,cAAa,EAAI,KAAG,CAAC;AACzB,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,MAAK,OAAO,CAAG,GAAE,CAAA,CAAG;AACtC,AAAI,gBAAA,CAAA,KAAI,EUzDd,CAAA,MAAK,KAAK,AAAC,CVyDmB,MAAK,CAAE,CAAA,CAAC,CAAtB,YAAU,CUzDsB,AVyDV,CAAC;AACjC,AAAI,gBAAA,CAAA,MAAK,EAAI,CAAA,IAAG,OAAO,AAAC,CAAC,KAAI,CAAC,CAAC;AAE/B,iBAAI,SAAQ,AAAC,CAAC,MAAK,CAAC,CAAG;AACrB,AAAI,kBAAA,CAAA,MAAK,EAAI,CAAA,mBAAkB,aAAa,AAAC,CAAC,KAAI,eAAe,CAAG,OAAK,CAAC,CAAC;AAC3E,6BAAa,EAAI,CAAA,mBAAkB,UAAU,AAAC,CAAC,cAAa,CAAG,OAAK,CAAC,CAAC;cACxE;AAAA,AAEA,iBAAI,KAAI,gBAAgB,GAAK,CAAA,SAAQ,AAAC,CAAC,cAAa,CAAC,CAAG;AACtD,mBAAI,aAAY;AAAG,oCAAkB,cAAc,AAAC,CAAC,KAAI,CAAG,CAAA,cAAa,CAAE,CAAA,CAAC,CAAC,CAAC;AAAA,AAE9E,mBAAG,WAAW,eAAe,AAAC,CAAC,KAAI,iBAAiB,CAAG,eAAa,CAAC,CAAC;AACtE,6BAAa,EAAI,KAAG,CAAC;cACvB;AAAA,YACF;AAAA,UACF;AAEA,eAAK,CAAL,UAAO,KAAI,AAAY,CAAG;AM1E5B,iBAAK,cAAc,ON0EJ,YAAU,CM1Ea,CAAA;AN2ElC,cAAI;AACF,iBAAI,KAAI,KAAK,GAAK,6BAA2B,CAAG;AAC9C,qBAAO,CAAA,IAAG,iBAAiB,AAAC,CAAC,KAAI,CAAC,CAAC;cACrC,KAAO;AACL,qBAAO,CAAA,IAAG,gBAAgB,AAAC,CAAC,KAAI,CAAC,CAAC;cACpC;AAAA,YACF,CAAE,OAAO,CAAA,CAAG;AACV,kBAAM,IAAI,qBAAmB,AAAC,CAAC,KAAI,CAAG,EAAA,CAAC,CAAC;YAC1C;AAAA,UACF;AAEA,wBAAc,CAAd,UAAgB,KAAI,AAAY,CAAG;AMtFrC,iBAAK,cAAc,ONsFK,YAAU,CMtFI,CAAA;ANuFlC,eAAI,IAAG,6BAA6B,AAAC,CAAC,KAAI,CAAC,CAAG;AAC5C,iBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,MAAI,CAAC,CAAC;AAC9B,mBAAO,KAAG,CAAC;YACb;AAAA,AAEI,cAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC;AACrC,AAAI,cAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,oBAAoB,AAAC,CAAC,KAAI,CAAC,CAAC;AAE/C,eAAI,CAAC,MAAK,AAAC,CAAC,SAAQ,CAAG,UAAQ,CAAC,CAAG;AACjC,iBAAG,WAAW,AAAC,CAAC,KAAI,CAAG,UAAQ,CAAC,CAAC;AACjC,iBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,KAAG,CAAC,CAAC;AAE7B,iBAAI,KAAI,cAAc,CAAG;AACvB,qBAAO,CAAA,mBAAkB,aAAa,AAAC,CAAC,SAAQ,CAAG,UAAQ,CAAC,CAAC;cAC/D,KAAO;AACL,qBAAO,KAAG,CAAC;cACb;AAAA,YACF,KAAO;AACL,iBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,MAAI,CAAC,CAAC;AAC9B,mBAAO,KAAG,CAAC;YACb;AAAA,UACF;AAEA,4BAAkB,CAAlB,UAAoB,KAAI,AAAY;AM9GtC,iBAAK,cAAc,ON8GS,YAAU,CM9GA,CAAA;AN+GlC,mBAAQ,KAAI,KAAK;AACf,iBAAK,iBAAe;AAClB,qBAAO,CAAA,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAC;AAAA,AAEjC,iBAAK,kBAAgB;AACnB,qBAAO,CAAA,KAAI,YAAY,CAAC;AAAA,AAE1B,iBAAK,qBAAmB;AACtB,AAAI,kBAAA,CAAA,OAAM,EAAI,CAAA,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAC;AACtC,AAAI,kBAAA,CAAA,CAAA,EAAI,CAAA,mBAAkB,YAAY,AAAC,CAAC,KAAI,KAAK,CAAG,QAAM,CAAC,CAAC;AAC5D,mBAAI,CAAA,WAAa,4BAA0B,CAAG;AAC5C,uBAAO,CAAA,CAAA,IAAI,AAAC,CAAC,KAAI,KAAK,CAAC,CAAC;gBAC1B,KAAO;AACL,AAAI,oBAAA,CAAA,cAAa,EU5H3B,CAAA,MAAK,KAAK,AAAC,CV4H6B,KAAI,YAAY,CAA3B,SAAO,CU5HY,AV4HQ,CAAC;AAC/C,uBAAO,CAAA,cAAa,AAAC,CAAC,CAAA,CAAC,CAAC;gBAC1B;AAAA,AACA,qBAAK;AAAA,AAEP,iBAAK,0BAAwB;AAC3B,AAAI,kBAAA,CAAA,aAAY,EUlIxB,CAAA,MAAK,KAAK,AAAC,CVkI0B,KAAI,YAAY,CAA3B,SAAO,CUlIe,AVkIK,CAAC;AAC9C,qBAAO,CAAA,aAAY,AAAC,CAAC,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAG,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC,CAAC;AAAA,AAEvE,iBAAK,yBAAuB;AAC1B,AAAI,kBAAA,CAAA,GAAE,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAE,CAAA,CAAC,CAAC;AAClC,qBAAO,CAAA,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAE,GAAE,CAAC,CAAC;AAAA,AAEtC,iBAAK,2BAAyB;AAC5B,qBAAO,CAAA,eAAc,MAAM,AAAC,CAAC,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAG,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC,CAAC;AAAA,AAE/E,iBAAK,wBAAsB,CAAC;AAC5B,iBAAK,yBAAuB;AAC1B,qBAAO,CAAA,eAAc,MAAM,AAAC,CAAC,KAAI,YAAY,CAAG,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC,CAAC;AAAA,AAExE,iBAAK,6BAA2B;AAC9B,AAAI,kBAAA,CAAA,SAAQ,EAAI,CAAA,UAAS,IAAI,AAAC,CAAC,IAAG,WAAW,CAAG,CAAA,KAAI,YAAY,CAAC,CAAC;AAClE,qBAAO,CAAA,eAAc,MAAM,AAAC,CAAC,SAAQ,CAAG,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC,CAAC;AAAA,AAEhE;AACE,oBAAM,IAAI,cAAY,AAAC,EAAC,oBAAoB,EAAC,CAAA,KAAI,KAAK,EAAG,CAAC;AADrD,YAET;UACF;AAEA,yBAAe,CAAf,UAAiB,KAAI,AAAY,CAAG;AMzJtC,iBAAK,cAAc,ONyJM,YAAU,CMzJG,CAAA;AN0JlC,AAAI,cAAA,CAAA,IAAG,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC;AAChC,AAAI,cAAA,CAAA,OAAM,EAAI,CAAA,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAC;AAEtC,AAAI,cAAA,CAAA,MAAK,EAAI,CAAA,mBAAkB,gBAAgB,AAAC,CAAC,IAAG,CAAG,QAAM,CAAC,CAAC;AAC/D,eAAI,SAAQ,AAAC,CAAC,MAAK,CAAC,CAAG;AACrB,iBAAG,WAAW,AAAC,CAAC,KAAI,CAAG,CAAA,MAAK,aAAa,CAAC,CAAC;YAC7C;AAAA,AACA,iBAAO,OAAK,CAAC;UACf;AAEA,qBAAW,CAAX,UAAa,KAAI,AAAY,CAAG;AMpKlC,iBAAK,cAAc,ONoKE,YAAU,CMpKO,CAAA;ANqKlC,iBAAO,CAAA,IAAG,OAAO,CAAE,KAAI,aAAa,CAAC,CAAC;UACxC;AAEA,kBAAQ,CAAR,UAAU,KAAI,AAAY,CAAG;AMxK/B,iBAAK,cAAc,ONwKD,YAAU,CMxKU,CAAA;ANyKlC,iBAAO,CAAA,IAAG,OAAO,CAAE,KAAI,UAAU,CAAC,CAAC;UACrC;AAEA,mBAAS,CAAT,UAAW,KAAI,AAAY,CAAG,CAAA,KAAI,CAAG;AM5KvC,iBAAK,cAAc,ON4KA,YAAU,QW5K7B,CAAA,MAAK,KAAK,IAAI,CLAwB,CAAA;AN6KlC,eAAG,OAAO,CAAE,KAAI,UAAU,CAAC,EAAI,MAAI,CAAC;UACtC;AAEA,oBAAU,CAAV,UAAY,KAAI,AAAY,CAAG,CAAA,KAAI,AAAQ,CAAG;AMhLhD,iBAAK,cAAc,ONgLC,YAAU,QOhL9B,CAAA,MAAK,KAAK,SDA4B,CAAA;ANiLlC,eAAG,QAAQ,CAAE,KAAI,UAAU,CAAC,EAAI,MAAI,CAAC;UACvC;AAEA,qCAA2B,CAA3B,UAA6B,KAAI,AAAY;AMpL/C,iBAAK,cAAc,ONoLkB,YAAU,CMpLT,CAAA;AMAtC,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CZqLd,KAAI,eAAe,AAAC,EAAC,CAAA,EAAK,EAAC,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CYrLlB,CLA3C,CAAA,MAAK,KAAK,SKAqD,CAAA;UZsL7D;AAEA,qBAAW,CAAX,UAAa,KAAI,AAAY;AMxL/B,iBAAK,cAAc,ONwLE,YAAU,CMxLO,CAAA;ANyLlC,AAAI,cAAA,CAAA,IAAG,EAAI,CAAA,KAAI,KAAK,CAAC;AACrB,gBAAQ,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,IAAG,OAAO,CAAG,GAAE,CAAA,CAAG;AACnC,iBAAI,IAAG,QAAQ,CAAE,IAAG,CAAE,CAAA,CAAC,CAAC,CAAG;AY3LjC,qBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CZ4LV,IAAG,CY5LyB,CLA3C,CAAA,MAAK,KAAK,SKAqD,CAAA;cZ6LzD;AAAA,YACF;AAAA,AY9LJ,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CZ+Ld,KAAI,CY/L4B,CLA3C,CAAA,MAAK,KAAK,SKAqD,CAAA;UZgM7D;AAEA,kBAAQ,CAAR,UAAU,KAAI,AAAY,CAAG;AMlM/B,iBAAK,cAAc,ONkMD,YAAU,CMlMU,CAAA;ANmMlC,AAAI,cAAA,CAAA,GAAE,EAAI,CAAA,WAAU,gBAAgB,AAAC,CAAC,KAAI,KAAK,OAAO,CAAC,CAAC;AACxD,AAAI,cAAA,CAAA,IAAG,EAAI,CAAA,KAAI,KAAK,CAAC;AACrB,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,IAAG,OAAO,CAAG,GAAE,CAAA,CAAG;AACpC,gBAAE,CAAE,CAAA,CAAC,EAAI,CAAA,IAAG,OAAO,CAAE,IAAG,CAAE,CAAA,CAAC,CAAC,CAAC;YAC/B;AAAA,AACA,iBAAO,IAAE,CAAC;UACZ;AAAA,aKtMgE,SAAO,CAAC,CAAC;MACnE,AAAC,CLwBkC,sBAAqB,CKxBrC,EDJ2C;ASAtE,WAAK,eAAe,AAAC,qCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBND1B,MAAK,KAAK,QPmC+B,GAAE,IQnC3C,MAAK,YAAY,ARmC0C,CAAA,IAAG,CAAE,YAAU,CAAC,AQnCvC,GKCa;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,0DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBND1B,MAAK,KAAK,OMCuC;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,sEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBND1B,MAAK,KAAK,WMCuC;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,sDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBbyEX,WAAU,GazEwB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,+DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBbqFF,WAAU,GarFe;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,mEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBb6GE,WAAU,Ga7GW;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,gEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBbwJD,WAAU,GaxJc;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,4DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBbmKL,WAAU,GanKkB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,yDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBbuKR,WAAU,GavKqB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,0DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBb2KP,WAAU,Oa3KoB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,2DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBb+KN,WAAU,IOhL9B,MAAK,KAAK,WMCuC;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,4EACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBbmLW,WAAU,GanLE;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,4DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBbuLL,WAAU,GavLkB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,yDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBbiMR,WAAU,GajMqB;QAAC,CAAC,CAAC,CAAC;yBb2M5B,EAAC,IAAG,CAAC;IC1MC;EAC3B,CAAA;AHDI,CAAC,CAAC;AEkNV","file":"/Users/patrick/Documents/open source/angular/modules/angular2/src/change_detection/dynamic_change_detector.js","sourceRoot":"/Users/patrick/Documents/open source/angular/modules/angular2/src/change_detection/","sourcesContent":["System.register($__placeholder__0, $__placeholder__1, function($__export) {\n          $__placeholder__2\n        });","var __moduleName = $__placeholder__0;","import {isPresent, isBlank, BaseException, FunctionWrapper} from 'angular2/src/facade/lang';\nimport {List, ListWrapper, MapWrapper, StringMapWrapper} from 'angular2/src/facade/collection';\nimport {ContextWithVariableBindings} from './parser/context_with_variable_bindings';\n\nimport {AbstractChangeDetector} from './abstract_change_detector';\nimport {ChangeDetectionUtil, SimpleChange, uninitialized} from './change_detection_util';\n\nimport {ArrayChanges} from './array_changes';\nimport {KeyValueChanges} from './keyvalue_changes';\n\nimport {\n  ProtoRecord,\n  RECORD_TYPE_SELF,\n  RECORD_TYPE_PROPERTY,\n  RECORD_TYPE_INVOKE_METHOD,\n  RECORD_TYPE_CONST,\n  RECORD_TYPE_INVOKE_CLOSURE,\n  RECORD_TYPE_PRIMITIVE_OP,\n  RECORD_TYPE_KEYED_ACCESS,\n  RECORD_TYPE_INVOKE_FORMATTER,\n  RECORD_TYPE_STRUCTURAL_CHECK,\n  RECORD_TYPE_INTERPOLATE,\n  ProtoChangeDetector\n  } from './proto_change_detector';\n\nimport {ChangeDetector, ChangeDispatcher} from './interfaces';\nimport {ExpressionChangedAfterItHasBeenChecked, ChangeDetectionError} from './exceptions';\n\nexport class DynamicChangeDetector extends AbstractChangeDetector {\n  dispatcher:any;\n  formatters:Map;\n  values:List;\n  changes:List;\n  protos:List<ProtoRecord>;\n\n  constructor(dispatcher:any, formatters:Map, protoRecords:List<ProtoRecord>) {\n    super();\n    this.dispatcher = dispatcher;\n    this.formatters = formatters;\n\n    this.values = ListWrapper.createFixedSize(protoRecords.length + 1);\n    ListWrapper.fill(this.values, uninitialized);\n\n    this.changes = ListWrapper.createFixedSize(protoRecords.length + 1);\n\n    this.protos = protoRecords;\n  }\n\n  setContext(context:any) {\n    this.values[0] = context;\n  }\n\n  detectChangesInRecords(throwOnChange:boolean) {\n    var protos:List<ProtoRecord> = this.protos;\n\n    var updatedRecords = null;\n    for (var i = 0; i < protos.length; ++i) {\n      var proto:ProtoRecord = protos[i];\n      var change = this._check(proto);\n\n      if (isPresent(change)) {\n        var record = ChangeDetectionUtil.changeRecord(proto.bindingMemento, change);\n        updatedRecords = ChangeDetectionUtil.addRecord(updatedRecords, record);\n      }\n\n      if (proto.lastInDirective && isPresent(updatedRecords)) {\n        if (throwOnChange) ChangeDetectionUtil.throwOnChange(proto, updatedRecords[0]);\n\n        this.dispatcher.onRecordChange(proto.directiveMemento, updatedRecords);\n        updatedRecords = null;\n      }\n    }\n  }\n\n  _check(proto:ProtoRecord) {\n    try {\n      if (proto.mode == RECORD_TYPE_STRUCTURAL_CHECK) {\n        return this._structuralCheck(proto);\n      } else {\n        return this._referenceCheck(proto);\n      }\n    } catch (e) {\n      throw new ChangeDetectionError(proto, e);\n    }\n  }\n\n  _referenceCheck(proto:ProtoRecord) {\n    if (this._pureFuncAndArgsDidNotChange(proto)) {\n      this._setChanged(proto, false);\n      return null;\n    }\n\n    var prevValue = this._readSelf(proto);\n    var currValue = this._calculateCurrValue(proto);\n\n    if (!isSame(prevValue, currValue)) {\n      this._writeSelf(proto, currValue);\n      this._setChanged(proto, true);\n\n      if (proto.lastInBinding) {\n        return ChangeDetectionUtil.simpleChange(prevValue, currValue);\n      } else {\n        return null;\n      }\n    } else {\n      this._setChanged(proto, false);\n      return null;\n    }\n  }\n\n  _calculateCurrValue(proto:ProtoRecord) {\n    switch (proto.mode) {\n      case RECORD_TYPE_SELF:\n        return this._readContext(proto);\n\n      case RECORD_TYPE_CONST:\n        return proto.funcOrValue;\n\n      case RECORD_TYPE_PROPERTY:\n        var context = this._readContext(proto);\n        var c = ChangeDetectionUtil.findContext(proto.name, context);\n        if (c instanceof ContextWithVariableBindings) {\n          return c.get(proto.name);\n        } else {\n          var propertyGetter:Function = proto.funcOrValue;\n          return propertyGetter(c);\n        }\n        break;\n\n      case RECORD_TYPE_INVOKE_METHOD:\n        var methodInvoker:Function = proto.funcOrValue;\n        return methodInvoker(this._readContext(proto), this._readArgs(proto));\n\n      case RECORD_TYPE_KEYED_ACCESS:\n        var arg = this._readArgs(proto)[0];\n        return this._readContext(proto)[arg];\n\n      case RECORD_TYPE_INVOKE_CLOSURE:\n        return FunctionWrapper.apply(this._readContext(proto), this._readArgs(proto));\n\n      case RECORD_TYPE_INTERPOLATE:\n      case RECORD_TYPE_PRIMITIVE_OP:\n        return FunctionWrapper.apply(proto.funcOrValue, this._readArgs(proto));\n\n      case RECORD_TYPE_INVOKE_FORMATTER:\n        var formatter = MapWrapper.get(this.formatters, proto.funcOrValue);\n        return FunctionWrapper.apply(formatter, this._readArgs(proto));\n\n      default:\n        throw new BaseException(`Unknown operation ${proto.mode}`);\n    }\n  }\n\n  _structuralCheck(proto:ProtoRecord) {\n    var self = this._readSelf(proto);\n    var context = this._readContext(proto);\n\n    var change = ChangeDetectionUtil.structuralCheck(self, context);\n    if (isPresent(change)) {\n      this._writeSelf(proto, change.currentValue);\n    }\n    return change;\n  }\n\n  _readContext(proto:ProtoRecord) {\n    return this.values[proto.contextIndex];\n  }\n\n  _readSelf(proto:ProtoRecord) {\n    return this.values[proto.selfIndex];\n  }\n\n  _writeSelf(proto:ProtoRecord, value) {\n    this.values[proto.selfIndex] = value;\n  }\n\n  _setChanged(proto:ProtoRecord, value:boolean) {\n    this.changes[proto.selfIndex] = value;\n  }\n\n  _pureFuncAndArgsDidNotChange(proto:ProtoRecord):boolean {\n    return proto.isPureFunction() && !this._argsChanged(proto);\n  }\n\n  _argsChanged(proto:ProtoRecord):boolean {\n    var args = proto.args;\n    for(var i = 0; i < args.length; ++i) {\n      if (this.changes[args[i]]) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  _readArgs(proto:ProtoRecord) {\n    var res = ListWrapper.createFixedSize(proto.args.length);\n    var args = proto.args;\n    for (var i = 0; i < args.length; ++i) {\n      res[i] = this.values[args[i]];\n    }\n    return res;\n  }\n}\n\nvar _singleElementList = [null];\n\nfunction isSame(a, b) {\n  if (a === b) return true;\n  if (a instanceof String && b instanceof String && a == b) return true;\n  if ((a !== a) && (b !== b)) return true;\n  return false;\n}\n","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function($__m) {\n          $__placeholder__0\n        }","$__placeholder__0 = $__m.$__placeholder__1;","var $__placeholder__0 = $__export($__placeholder__1, $__placeholder__2);","function($__super) {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4, $__super);\n        }($__placeholder__5)","assert.argumentTypes($__placeholder__0)","assert.type.$__placeholder__0)","assert.genericType($__placeholder__0)","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","assert.type($__placeholder__0, $__placeholder__1)","assert.type.any","return assert.returnType(($__placeholder__0), $__placeholder__1)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}