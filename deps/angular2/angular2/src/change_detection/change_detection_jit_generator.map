{"version":3,"sources":["@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/5","change_detection_jit_generator.es6","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/164"],"names":[],"mappings":"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","file":"/Users/patrick/Documents/open source/angular/modules/angular2/src/change_detection/change_detection_jit_generator.es6","sourceRoot":"/Users/patrick/Documents/open source/angular/modules/angular2/src/change_detection/","sourcesContent":["System.register($__placeholder__0, $__placeholder__1, function($__export) {\n          $__placeholder__2\n        });","var __moduleName = $__placeholder__0;","import {isPresent, isBlank, BaseException, Type} from 'angular2/src/facade/lang';\nimport {List, ListWrapper, MapWrapper, StringMapWrapper} from 'angular2/src/facade/collection';\n\nimport {ContextWithVariableBindings} from './parser/context_with_variable_bindings';\nimport {AbstractChangeDetector} from './abstract_change_detector';\nimport {ChangeDetectionUtil} from './change_detection_util';\n\nimport {\n  ProtoRecord,\n  RECORD_TYPE_SELF,\n  RECORD_TYPE_PROPERTY,\n  RECORD_TYPE_INVOKE_METHOD,\n  RECORD_TYPE_CONST,\n  RECORD_TYPE_INVOKE_CLOSURE,\n  RECORD_TYPE_PRIMITIVE_OP,\n  RECORD_TYPE_KEYED_ACCESS,\n  RECORD_TYPE_INVOKE_FORMATTER,\n  RECORD_TYPE_STRUCTURAL_CHECK,\n  RECORD_TYPE_INTERPOLATE,\n  ProtoChangeDetector\n  } from './proto_change_detector';\n\n/**\n * The code generator takes a list of proto records and creates a function/class\n * that \"emulates\" what the developer would write by hand to implement the same\n * kind of behaviour.\n *\n * For example: An expression `address.city` will result in the following class:\n *\n * var ChangeDetector0 = function ChangeDetector0(dispatcher, formatters, protos) {\n *   AbstractChangeDetector.call(this);\n *   this.dispatcher = dispatcher;\n *   this.formatters = formatters;\n *   this.protos = protos;\n *\n *   this.context = null;\n *   this.address0 = null;\n *   this.city1 = null;\n * }\n * ChangeDetector0.prototype = Object.create(AbstractChangeDetector.prototype);\n *\n * ChangeDetector0.prototype.detectChangesInRecords = function(throwOnChange) {\n *   var address0;\n *   var city1;\n *   var change;\n *   var changes = null;\n *   var temp;\n *   var context = this.context;\n *\n *   temp = ChangeDetectionUtil.findContext(\"address\", context);\n *   if (temp instanceof ContextWithVariableBindings) {\n *     address0 = temp.get('address');\n *   } else {\n *     address0 = temp.address;\n *   }\n *\n *   if (address0 !== this.address0) {\n *     this.address0 = address0;\n *   }\n *\n *   city1 = address0.city;\n *   if (city1 !== this.city1) {\n *     changes = ChangeDetectionUtil.addRecord(changes,\n *       ChangeDetectionUtil.simpleChangeRecord(this.protos[1].bindingMemento, this.city1, city1));\n *     this.city1 = city1;\n *   }\n *\n *   if (changes.length > 0) {\n *     if(throwOnChange) ChangeDetectionUtil.throwOnChange(this.protos[1], changes[0]);\n *     this.dispatcher.onRecordChange('address.city', changes);\n *     changes = null;\n *   }\n * }\n *\n *\n * ChangeDetector0.prototype.setContext = function(context) {\n *   this.context = context;\n * }\n *\n * return ChangeDetector0;\n *\n *\n * The only thing the generated class depends on is the super class AbstractChangeDetector.\n *\n * The implementation comprises two parts:\n * * ChangeDetectorJITGenerator has the logic of how everything fits together.\n * * template functions (e.g., constructorTemplate) define what code is generated.\n*/\n\nvar ABSTRACT_CHANGE_DETECTOR = \"AbstractChangeDetector\";\nvar UTIL = \"ChangeDetectionUtil\";\nvar DISPATCHER_ACCESSOR = \"this.dispatcher\";\nvar FORMATTERS_ACCESSOR = \"this.formatters\";\nvar PROTOS_ACCESSOR = \"this.protos\";\nvar CHANGE_LOCAL = \"change\";\nvar CHANGES_LOCAL = \"changes\";\nvar TEMP_LOCAL = \"temp\";\n\nfunction typeTemplate(type:string, cons:string, detectChanges:string, setContext:string):string {\n  return `\n${cons}\n${detectChanges}\n${setContext};\n\nreturn function(dispatcher, formatters) {\n  return new ${type}(dispatcher, formatters, protos);\n}\n`;\n}\n\nfunction constructorTemplate(type:string, fieldsDefinitions:string):string {\n  return `\nvar ${type} = function ${type}(dispatcher, formatters, protos) {\n${ABSTRACT_CHANGE_DETECTOR}.call(this);\n${DISPATCHER_ACCESSOR} = dispatcher;\n${FORMATTERS_ACCESSOR} = formatters;\n${PROTOS_ACCESSOR} = protos;\n${fieldsDefinitions}\n}\n\n${type}.prototype = Object.create(${ABSTRACT_CHANGE_DETECTOR}.prototype);\n`;\n}\n\nfunction setContextTemplate(type:string):string {\n  return `\n${type}.prototype.setContext = function(context) {\n  this.context = context;\n}\n`;\n}\n\nfunction detectChangesTemplate(type:string, body:string):string {\n  return `\n${type}.prototype.detectChangesInRecords = function(throwOnChange) {\n  ${body}\n}\n`;\n}\n\n\nfunction bodyTemplate(localDefinitions:string, changeDefinitions:string, records:string):string {\n  return `\n${localDefinitions}\n${changeDefinitions}\nvar ${TEMP_LOCAL};\nvar ${CHANGE_LOCAL};\nvar ${CHANGES_LOCAL} = null;\n\ncontext = this.context;\n${records}\n`;\n}\n\nfunction notifyTemplate(index:number):string{\n  return  `\nif (${CHANGES_LOCAL} && ${CHANGES_LOCAL}.length > 0) {\n  if(throwOnChange) ${UTIL}.throwOnChange(${PROTOS_ACCESSOR}[${index}], ${CHANGES_LOCAL}[0]);\n  ${DISPATCHER_ACCESSOR}.onRecordChange(${PROTOS_ACCESSOR}[${index}].directiveMemento, ${CHANGES_LOCAL});\n  ${CHANGES_LOCAL} = null;\n}\n`;\n}\n\n\nfunction structuralCheckTemplate(selfIndex:number, field:string, context:string, notify:string):string{\n  return `\n${CHANGE_LOCAL} = ${UTIL}.structuralCheck(${field}, ${context});\nif (${CHANGE_LOCAL}) {\n  ${CHANGES_LOCAL} = ${UTIL}.addRecord(${CHANGES_LOCAL},\n    ${UTIL}.changeRecord(${PROTOS_ACCESSOR}[${selfIndex}].bindingMemento, ${CHANGE_LOCAL}));\n  ${field} = ${CHANGE_LOCAL}.currentValue;\n}\n${notify}\n`;\n}\n\nfunction referenceCheckTemplate(assignment, newValue, oldValue, change, addRecord, notify) {\n  return `\n${assignment}\nif (${newValue} !== ${oldValue} || (${newValue} !== ${newValue}) && (${oldValue} !== ${oldValue})) {\n  ${change} = true;\n  ${addRecord}\n  ${oldValue} = ${newValue};\n}\n${notify}\n`;\n}\n\nfunction assignmentTemplate(field:string, value:string) {\n  return `${field} = ${value};`;\n}\n\nfunction propertyReadTemplate(name:string, context:string, newValue:string) {\n  return `\n${TEMP_LOCAL} = ${UTIL}.findContext(\"${name}\", ${context});\nif (${TEMP_LOCAL} instanceof ContextWithVariableBindings) {\n  ${newValue} = ${TEMP_LOCAL}.get('${name}');\n} else {\n  ${newValue} = ${TEMP_LOCAL}.${name};\n}\n`;\n}\n\nfunction localDefinitionsTemplate(names:List):string {\n  return names.map((n) => `var ${n};`).join(\"\\n\");\n}\n\nfunction changeDefinitionsTemplate(names:List):string {\n  return names.map((n) => `var ${n} = false;`).join(\"\\n\");\n}\n\nfunction fieldDefinitionsTemplate(names:List):string {\n  return names.map((n) => `${n} = ${UTIL}.unitialized();`).join(\"\\n\");\n}\n\nfunction ifChangedGuardTemplate(changeNames:List, body:string):string {\n  var cond = changeNames.join(\" || \");\n  return `\nif (${cond}) {\n  ${body}\n}\n`;\n}\n\nfunction addSimpleChangeRecordTemplate(protoIndex:number, oldValue:string, newValue:string) {\n  return `${CHANGES_LOCAL} = ${UTIL}.addRecord(${CHANGES_LOCAL},\n    ${UTIL}.simpleChangeRecord(${PROTOS_ACCESSOR}[${protoIndex}].bindingMemento, ${oldValue}, ${newValue}));`;\n}\n\n\nexport class ChangeDetectorJITGenerator {\n  typeName:string;\n  records:List<ProtoRecord>;\n  localNames:List<String>;\n  changeNames:List<String>;\n  fieldNames:List<String>;\n\n  constructor(typeName:string, records:List<ProtoRecord>) {\n    this.typeName = typeName;\n    this.records = records;\n\n    this.localNames = this.getLocalNames(records);\n    this.changeNames = this.getChangeNames(this.localNames);\n    this.fieldNames = this.getFieldNames(this.localNames);\n  }\n\n  getLocalNames(records:List<ProtoRecord>):List<String> {\n    var index = 0;\n    var names = records.map((r) => {\n      var sanitizedName = r.name.replace(new RegExp(\"\\\\W\", \"g\"), '');\n      return `${sanitizedName}${index++}`\n    });\n    return [\"context\"].concat(names);\n  }\n\n  getChangeNames(localNames:List<String>):List<String> {\n    return localNames.map((n) => `change_${n}`);\n  }\n\n  getFieldNames(localNames:List<String>):List<String> {\n    return localNames.map((n) => `this.${n}`);\n  }\n\n\n  generate():Function {\n    var text = typeTemplate(this.typeName, this.genConstructor(), this.genDetectChanges(), this.genSetContext());\n    return new Function('AbstractChangeDetector', 'ChangeDetectionUtil', 'ContextWithVariableBindings', 'protos', text)(AbstractChangeDetector, ChangeDetectionUtil, ContextWithVariableBindings, this.records);\n  }\n\n  genConstructor():string {\n    return constructorTemplate(this.typeName, fieldDefinitionsTemplate(this.fieldNames));\n  }\n\n  genSetContext():string {\n    return setContextTemplate(this.typeName);\n  }\n\n  genDetectChanges():string {\n    var body = this.genBody();\n    return detectChangesTemplate(this.typeName, body);\n  }\n\n  genBody():string {\n    var rec = this.records.map((r) => this.genRecord(r)).join(\"\\n\");\n    return bodyTemplate(this.genLocalDefinitions(), this.genChangeDefinitions(), rec);\n  }\n\n  genLocalDefinitions():string {\n    return localDefinitionsTemplate(this.localNames);\n  }\n\n  genChangeDefinitions():string {\n    return changeDefinitionsTemplate(this.changeNames);\n  }\n\n  genRecord(r:ProtoRecord):string {\n    if (r.mode == RECORD_TYPE_STRUCTURAL_CHECK) {\n      return this.getStructuralCheck(r);\n    } else {\n      return this.genReferenceCheck(r);\n    }\n  }\n\n  getStructuralCheck(r:ProtoRecord):string {\n    var field = this.fieldNames[r.selfIndex];\n    var context = this.localNames[r.contextIndex];\n    return structuralCheckTemplate(r.selfIndex - 1, field, context, this.genNotify(r));\n  }\n\n  genReferenceCheck(r:ProtoRecord):string {\n    var newValue = this.localNames[r.selfIndex];\n    var oldValue = this.fieldNames[r.selfIndex];\n    var change = this.changeNames[r.selfIndex];\n    var assignment = this.genUpdateCurrentValue(r);\n    var addRecord = addSimpleChangeRecordTemplate(r.selfIndex - 1, oldValue, newValue);\n    var notify = this.genNotify(r);\n\n    var check = referenceCheckTemplate(assignment, newValue, oldValue, change, r.lastInBinding ? addRecord : '', notify);;\n    if (r.isPureFunction()) {\n      return this.ifChangedGuard(r, check);\n    } else {\n      return check;\n    }\n  }\n\n  genUpdateCurrentValue(r:ProtoRecord):string {\n    var context = this.localNames[r.contextIndex];\n    var newValue = this.localNames[r.selfIndex];\n    var args = this.genArgs(r);\n\n    switch (r.mode) {\n      case RECORD_TYPE_SELF:\n        return assignmentTemplate(newValue, context);\n\n      case RECORD_TYPE_CONST:\n        return `${newValue} = ${this.genLiteral(r.funcOrValue)}`;\n\n      case RECORD_TYPE_PROPERTY:\n        if (r.contextIndex == 0) { // only the first property read can be a local\n          return propertyReadTemplate(r.name, context, newValue);\n        } else {\n          return assignmentTemplate(newValue, `${context}.${r.name}`);\n        }\n\n      case RECORD_TYPE_INVOKE_METHOD:\n        return assignmentTemplate(newValue, `${context}.${r.name}(${args})`);\n\n      case RECORD_TYPE_INVOKE_CLOSURE:\n        return assignmentTemplate(newValue, `${context}(${args})`);\n\n      case RECORD_TYPE_PRIMITIVE_OP:\n        return assignmentTemplate(newValue, `${UTIL}.${r.name}(${args})`);\n\n      case RECORD_TYPE_INTERPOLATE:\n        return assignmentTemplate(newValue, this.genInterpolation(r));\n\n      case RECORD_TYPE_INVOKE_FORMATTER:\n        return assignmentTemplate(newValue, `${FORMATTERS_ACCESSOR}.get(\"${r.name}\")(${args})`);\n\n      case RECORD_TYPE_KEYED_ACCESS:\n        var key = this.localNames[r.args[0]];\n        return assignmentTemplate(newValue, `${context}[${key}]`);\n\n      default:\n        throw new BaseException(`Unknown operation ${r.mode}`);\n    }\n  }\n\n  ifChangedGuard(r:ProtoRecord, body:string):string {\n    return ifChangedGuardTemplate(r.args.map((a) => this.changeNames[a]), body);\n  }\n\n  genInterpolation(r:ProtoRecord):string{\n    var res = \"\";\n    for (var i = 0; i < r.args.length; ++i) {\n      res += this.genLiteral(r.fixedArgs[i]);\n      res += \" + \";\n      res += this.localNames[r.args[i]];\n      res += \" + \";\n    }\n    res += this.genLiteral(r.fixedArgs[r.args.length]);\n    return res;\n  }\n\n  genLiteral(value):string {\n    return JSON.stringify(value);\n  }\n\n  genNotify(r):string{\n    return r.lastInDirective ? notifyTemplate(r.selfIndex - 1) : '';\n  }\n\n  genArgs(r:ProtoRecord):string {\n    return r.args.map((arg) => this.localNames[arg]).join(\", \");\n  }\n}\n\n\n\n\n","assert.argumentTypes($__placeholder__0)","assert.type.$__placeholder__0)","return assert.returnType(($__placeholder__0), $__placeholder__1)","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function($__m) {\n          $__placeholder__0\n        }","$__placeholder__0 = $__m.$__placeholder__1;","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","var $__placeholder__0 = $__export($__placeholder__1, $__placeholder__2);","function() {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4);\n        }()","assert.genericType($__placeholder__0)"]}