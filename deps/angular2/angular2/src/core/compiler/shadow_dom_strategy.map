{"version":3,"sources":["@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/5","shadow_dom_strategy.js","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/164","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/921","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/18","@traceur/generated/TemplateParser/16"],"names":[],"mappings":"AAAA,KAAK,SAAS,AAAC,uTAAuC,UAAS,SAAQ;;ACAvE,AAAI,IAAA,CAAA,YAAW,mDAAoB,CAAC;;;;;;;;;;;;;;;;;;AC4EpC,SAAS,wBAAsB,CAAE,MAAK,CAAG,CAAA,IAAG,CAAG;AAC7C,QAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,IAAG,MAAM,OAAO,CAAG,GAAE,CAAA,CAAG;AAC1C,QAAE,YAAY,AAAC,CAAC,MAAK,CAAG,CAAA,IAAG,MAAM,CAAE,CAAA,CAAC,CAAC,CAAC;IACxC;AAAA,EACF;AAAA,AAGA,SAAS,cAAY,CAAE,EAAC;AACtB,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,GAAE,iBAAiB,AAAC,CAAC,EAAC,CAAG,QAAM,CAAC,CAAC;AAChD,AAAI,MAAA,CAAA,MAAK,EAAI,GAAC,CAAC;AACf,QAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,QAAO,OAAO,CAAG,CAAA,CAAA,EAAE,CAAG;AACxC,AAAI,QAAA,CAAA,KAAI,EAAI,CAAA,GAAE,OAAO,AAAC,CAAC,QAAO,CAAE,CAAA,CAAC,CAAC,CAAC;AACnC,gBAAU,KAAK,AAAC,CAAC,MAAK,CAAG,MAAI,CAAC,CAAC;IACjC;AAAA,ACzFF,SAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CD0FhB,MAAK,CC1F6B,CCA3C,CAAA,MAAK,YAAY,AFmFW,CAAA,IAAG,CAAE,aAAW,CAAC,AEnFT,CDA2B,CAAA;ED2F/D;AAGA,SAAS,cAAY,CAAE,EAAC,AAAS,CAAG,CAAA,MAAK,AAAoB,CAAG;AG9FhE,SAAK,cAAc,IH8FQ,QAAM,SE9FjC,CAAA,MAAK,YAAY,AF8F2B,CAAA,IAAG,CAAE,aAAW,CAAC,AE9FzB,CCAE,CAAA;AH+FpC,AAAI,MAAA,CAAA,UAAS,EAAI,CAAA,GAAE,WAAW,AAAC,CAAC,EAAC,CAAC,CAAC;AACnC,QAAS,GAAA,CAAA,CAAA,EAAI,CAAA,MAAK,OAAO,EAAI,EAAA,CAAG,CAAA,CAAA,GAAK,EAAA,CAAG,CAAA,CAAA,EAAE,CAAG;AAC3C,AAAI,QAAA,CAAA,KAAI,EAAI,CAAA,MAAK,CAAE,CAAA,CAAC,CAAC;AACrB,SAAI,SAAQ,AAAC,CAAC,UAAS,CAAC,CAAG;AACzB,UAAE,aAAa,AAAC,CAAC,UAAS,CAAG,MAAI,CAAC,CAAC;MACrC,KAAO;AACL,UAAE,YAAY,AAAC,CAAC,EAAC,CAAG,MAAI,CAAC,CAAC;MAC5B;AAAA,AACA,eAAS,EAAI,MAAI,CAAC;IACpB;AAAA,EACF;AAAA,AAGA,SAAS,wBAAsB,CAAE,EAAC,CAAG,CAAA,QAAO,AAAO,CAAG;AG5GtD,SAAK,cAAc,ICAnB,CAAA,MAAK,KAAK,IAAI,WCAd,CAAA,MAAK,KAAK,QFA4B,CAAA;AH8GpC,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,GAAE,iBAAiB,AAAC,CAAC,EAAC,CAAG,IAAE,CAAC,CAAC;AAC5C,QAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,QAAO,OAAO,CAAG,CAAA,CAAA,EAAE,CAAG;AACxC,AAAI,QAAA,CAAA,KAAI,EAAI,CAAA,QAAO,CAAE,CAAA,CAAC,CAAC;AACvB,QAAE,aAAa,AAAC,CAAC,KAAI,CAAG,SAAO,CAAG,GAAC,CAAC,CAAC;IACvC;AAAA,EACF;AAAA,AMnHA,OAAO;AACD,UAAM,GCDZ,SAAS,IAAG,CAAG;ACAf,aAAoB,KAAG,OAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,cAAoB,KAAG,QAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,UAAoB,KAAG,IAAkB,CAAC;AAA1C,cAAoB,KAAG,QAAkB,CAAC;AAA1C,mBAAoB,KAAG,aAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,kBAAoB,KAAG,YAAkB,CAAC;IDElC,CAFR,UAAS,IAAG,CAAG;ACAf,WAAoB,KAAG,KAAkB,CAAC;IDElC,CAFR,UAAS,IAAG,CAAG;ACAf,cAAoB,KAAG,QAAkB,CAAC;IDElC,CAFR,UAAS,IAAG,CAAG;ACAf,eAAoB,KAAG,SAAkB,CAAC;IDElC,CAFR,UAAS,IAAG,CAAG;ACAf,wBAAoB,KAAG,kBAAkB,CAAC;IDElC,CAFR,UAAS,IAAG,CAAG;ACAf,kBAAoB,KAAG,YAAkB,CAAC;IDElC,CDDuB;AACzB,UAAM;wBGFY,CAAA,SAAQ,AAAC,uBCAjC,SAAS,AAAD;AACE,AAAI,UAAA,oBVQP,SAAM,kBAAgB,KAK7B,AUbkD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AVQ5C,uBAAa,CAAb,UAAe,EAAC,AAAQ,CAAG,CAAA,IAAG,AAAK,CAAE;AGVvC,iBAAK,cAAc,IHUC,QAAM,OAAQ,KAAG,CGVC,CAAA;UHUE;AACtC,0BAAgB,CAAhB,UAAkB,YAAW,AAAK,CAAG,CAAA,aAAY,AAAK,CAAG,CAAA,EAAC,AAAQ,CAAE;AGXtE,iBAAK,cAAc,cHWc,KAAG,gBAAiB,KAAG,KAAM,QAAM,CGX9B,CAAA;UHWiC;AACrE,2BAAiB,CAAjB,UAAmB,AAAD;ACZpB,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CDYiB,IAAG,CCZF,CCA3C,CAAA,MAAK,YAAY,AFYM,CAAA,IAAG,CAAE,KAAG,CAAC,AEZI,CDA2B,CAAA;UDYf;AAC9C,wBAAc,CAAd,UAAgB,QAAO,AAAS,CAAG,CAAA,WAAU,AAAmB,CAAG;AGbrE,iBAAK,cAAc,UHaS,QAAM,cAAgB,kBAAgB,CGb5B,CAAA;AHaiC,iBAAO,KAAG,CAAC;UAAE;AAAA,aUVpB,CAAC;MACzD,AAAC,EAAC,EDJ4D;AEAtE,WAAK,eAAe,AAAC,0DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBXSN,OAAM,IAAQ,IAAG,GWTY;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,6DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBXUO,IAAG,IAAiB,IAAG,IAAM,OAAM,GWVnB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,2DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBXYE,OAAM,IAAgB,iBAAgB,GWZjB;QAAC,CAAC,CAAC,CAAC;gCFD7B,CAAA,SAAQ,AAAC,+BGAjC,SAAS,QAAO;AACN,AAAI,UAAA,4BZeP,SAAM,0BAAwB,CAGvB,AAAwB,CAAG;YAA3B,UAAQ,6CAAa,KAAG;AGnBtC,eAAK,cAAc,WHmBM,QAAM,CGnBO,CAAA;AHoBlC,AapBJ,wBAAc,iBAAiB,AAAC,2BAAkB,KAAK,MAAmB,CboB/D;AACP,aAAI,OAAM,AAAC,CAAC,SAAQ,CAAC,CAAG;AACtB,oBAAQ,EAAI,CAAA,GAAE,WAAW,AAAC,EAAC,KAAK,CAAC;UACnC;AAAA,AACA,aAAG,WAAW,EAAI,UAAQ,CAAC;QAC7B,AYxBgD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AZyB5C,uBAAa,CAAb,UAAe,EAAC,AAAQ,CAAG,CAAA,IAAG,AAAK,CAAE;AG3BvC,iBAAK,cAAc,IH2BC,QAAM,OAAQ,KAAG,CG3BC,CAAA;AH4BlC,cAAE,WAAW,AAAC,CAAC,EAAC,CAAC,CAAC;AAClB,kCAAsB,AAAC,CAAC,EAAC,CAAG,KAAG,CAAC,CAAC;UACnC;AAEA,0BAAgB,CAAhB,UAAkB,YAAW,AAAK,CAAG,CAAA,aAAY,AAAK,CAAG,CAAA,EAAC,AAAQ,CAAE;AGhCtE,iBAAK,cAAc,cHgCc,KAAG,gBAAiB,KAAG,KAAM,QAAM,CGhC9B,CAAA;AHiClC,iBAAO,IAAI,SAAO,AAAC,CAAC,YAAW,CAAG,cAAY,CAAG,GAAC,CAAC,CAAC;UACtD;AAEA,2BAAiB,CAAjB,UAAmB,AAAD;ACpCpB,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CDqCd,CAAC,OAAM,CAAC,CCrCwB,CCA3C,CAAA,MAAK,YAAY,AFoCM,CAAA,IAAG,CAAE,KAAG,CAAC,AEpCI,CDA2B,CAAA;UDsC7D;AAEA,wBAAc,CAAd,UAAgB,QAAO,AAAS,CAAG,CAAA,WAAU,AAAmB,CAAG;AGxCrE,iBAAK,cAAc,UHwCS,QAAM,cAAgB,kBAAgB,CGxC5B,CAAA;AHyClC,AAAI,cAAA,CAAA,YAAW,EAAI,CAAA,GAAE,kBAAkB,AAAC,CAAC,QAAO,CAAC,CAAC;AAClD,AAAI,cAAA,CAAA,QAAO,EAAI,CAAA,WAAU,WAAW,SAAS,CAAC;AAG9C,AAAI,cAAA,CAAA,MAAK,EAAI,CAAA,aAAY,AAAC,CAAC,YAAW,CAAC,CAAC;AACxC,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,MAAK,OAAO,CAAG,CAAA,CAAA,EAAE,CAAG;AACtC,AAAI,gBAAA,CAAA,KAAI,EAAI,CAAA,MAAK,CAAE,CAAA,CAAC,CAAC;AACrB,AAAI,gBAAA,CAAA,YAAW,EAAI,CAAA,WAAU,AAAC,CAAC,GAAE,QAAQ,AAAC,CAAC,KAAI,CAAC,CAAG,SAAO,CAAC,CAAC;AAC5D,gBAAE,QAAQ,AAAC,CAAC,KAAI,CAAG,aAAW,CAAC,CAAC;YAClC;AAAA,AACA,wBAAY,AAAC,CAAC,IAAG,WAAW,CAAG,OAAK,CAAC,CAAC;AAGtC,kCAAsB,AAAC,CAAC,YAAW,CAAG,SAAO,CAAC,CAAC;UACjD;AAAA,aYpDgE,SAAO,CAAC,CAAC;MACnE,AAAC,CZYsC,iBAAgB,CYZpC,EHJ2C;AEAtE,WAAK,eAAe,AAAC,yCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBXkBD,OAAM,GWlBkB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,kEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBX0BN,OAAM,IAAQ,IAAG,GW1BY;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,qEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBX+BO,IAAG,IAAiB,IAAG,IAAM,OAAM,GW/BnB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,mEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBXuCE,OAAM,IAAgB,iBAAgB,GWvCjB;QAAC,CAAC,CAAC,CAAC;8BFD7B,CAAA,SAAQ,AAAC,6BGAjC,SAAS,QAAO;AACN,AAAI,UAAA,0BZyDP,SAAM,wBAAsB;Ac1DnC,wBAAc,iBAAiB,AAAC,yBACL,MAAM,AAAC,CAAC,IAAG,CAAG,UAAQ,CAAC,CAAA;QdyElD,AYzEkD,CAAC;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AZyD5C,uBAAa,CAAb,UAAe,EAAC,AAAQ,CAAG,CAAA,IAAG,AAAK,CAAE;AG3DvC,iBAAK,cAAc,IH2DC,QAAM,OAAQ,KAAG,CG3DC,CAAA;AH4DlC,kCAAsB,AAAC,CAAC,EAAC,iBAAiB,AAAC,EAAC,CAAG,KAAG,CAAC,CAAC;UACtD;AAEA,0BAAgB,CAAhB,UAAkB,YAAW,AAAK,CAAG,CAAA,aAAY,AAAK,CAAG,CAAA,EAAC,AAAQ,CAAE;AG/DtE,iBAAK,cAAc,cH+Dc,KAAG,gBAAiB,KAAG,KAAM,QAAM,CG/D9B,CAAA;AHgElC,iBAAO,KAAG,CAAC;UACb;AAEA,2BAAiB,CAAjB,UAAmB,AAAD;ACnEpB,iBAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CDoEd,EAAC,CCpE+B,CCA3C,CAAA,MAAK,YAAY,AFmEM,CAAA,IAAG,CAAE,KAAG,CAAC,AEnEI,CDA2B,CAAA;UDqE7D;AAEA,wBAAc,CAAd,UAAgB,QAAO,AAAS,CAAG,CAAA,WAAU,AAAmB,CAAG;AGvErE,iBAAK,cAAc,UHuES,QAAM,cAAgB,kBAAgB,CGvE5B,CAAA;AHwElC,iBAAO,SAAO,CAAC;UACjB;AAAA,aYtEgE,SAAO,CAAC,CAAC;MACnE,AAAC,CZsDoC,iBAAgB,CYtDlC,EHJ2C;AEAtE,WAAK,eAAe,AAAC,gEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBX0DN,OAAM,IAAQ,IAAG,GW1DY;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,mEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBX8DO,IAAG,IAAiB,IAAG,IAAM,OAAM,GW9DnB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,iEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBXsEE,OAAM,IAAgB,iBAAgB,GWtEjB;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,6BACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBX6FC,OAAM,IE9FjC,MAAK,YAAY,AF8F2B,CAAA,IAAG,CAAE,aAAW,CAAC,AE9FzB,GSCa;QAAC,CAAC,CAAC,CAAC;AADrD,WAAK,eAAe,AAAC,uCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,sBND1B,MAAK,KAAK,UMCuC;QAAC,CAAC,CAAC,CAAC;ILCtB;EAC3B,CAAA;ARDI,CAAC,CAAC;AEkHV","file":"/Users/patrick/Documents/open source/angular/modules/angular2/src/core/compiler/shadow_dom_strategy.js","sourceRoot":"/Users/patrick/Documents/open source/angular/modules/angular2/src/core/compiler/","sourcesContent":["System.register($__placeholder__0, $__placeholder__1, function($__export) {\n          $__placeholder__2\n        });","var __moduleName = $__placeholder__0;","import {Type, isBlank, isPresent} from 'angular2/src/facade/lang';\nimport {DOM, Element, StyleElement} from 'angular2/src/facade/dom';\nimport {List, ListWrapper} from 'angular2/src/facade/collection';\nimport {View} from './view';\nimport {Content} from './shadow_dom_emulation/content_tag';\nimport {LightDom} from './shadow_dom_emulation/light_dom';\nimport {DirectiveMetadata} from './directive_metadata';\nimport {shimCssText} from './shadow_dom_emulation/shim_css';\n\nexport class ShadowDomStrategy {\n  attachTemplate(el:Element, view:View){}\n  constructLightDom(lightDomView:View, shadowDomView:View, el:Element){}\n  polyfillDirectives():List<Type>{ return null; }\n  processTemplate(template: Element, cmpMetadata: DirectiveMetadata) { return null; }\n}\n\nexport class EmulatedShadowDomStrategy extends ShadowDomStrategy {\n  _styleHost: Element;\n\n  constructor(styleHost: Element = null) {\n    super();\n    if (isBlank(styleHost)) {\n      styleHost = DOM.defaultDoc().head;\n    }\n    this._styleHost = styleHost;\n  }\n\n  attachTemplate(el:Element, view:View){\n    DOM.clearNodes(el);\n    moveViewNodesIntoParent(el, view);\n  }\n\n  constructLightDom(lightDomView:View, shadowDomView:View, el:Element){\n    return new LightDom(lightDomView, shadowDomView, el);\n  }\n\n  polyfillDirectives():List<Type> {\n    return [Content];\n  }\n\n  processTemplate(template: Element, cmpMetadata: DirectiveMetadata) {\n    var templateRoot = DOM.templateAwareRoot(template);\n    var attrName = cmpMetadata.annotation.selector;\n\n    // Shim CSS for emulated shadow DOM and attach the styles do the document head\n    var styles = _detachStyles(templateRoot);\n    for (var i = 0; i < styles.length; i++) {\n      var style = styles[i];\n      var processedCss = shimCssText(DOM.getText(style), attrName);\n      DOM.setText(style, processedCss);\n    }\n    _attachStyles(this._styleHost, styles);\n\n    // Update the DOM to trigger the CSS\n    _addAttributeToChildren(templateRoot, attrName);\n  }\n}\n\nexport class NativeShadowDomStrategy extends ShadowDomStrategy {\n  attachTemplate(el:Element, view:View){\n    moveViewNodesIntoParent(el.createShadowRoot(), view);\n  }\n\n  constructLightDom(lightDomView:View, shadowDomView:View, el:Element){\n    return null;\n  }\n\n  polyfillDirectives():List<Type> {\n    return [];\n  }\n\n  processTemplate(template: Element, cmpMetadata: DirectiveMetadata) {\n    return template;\n  }\n}\n\nfunction moveViewNodesIntoParent(parent, view) {\n  for (var i = 0; i < view.nodes.length; ++i) {\n    DOM.appendChild(parent, view.nodes[i]);\n  }\n}\n\n// TODO(vicb): union types: el is an Element or a Document Fragment\nfunction _detachStyles(el): List<StyleElement> {\n  var nodeList = DOM.querySelectorAll(el, 'style');\n  var styles = [];\n  for (var i = 0; i < nodeList.length; i++) {\n    var style = DOM.remove(nodeList[i]);\n    ListWrapper.push(styles, style);\n  }\n  return styles;\n}\n\n// Move the styles as the first children of the template\nfunction _attachStyles(el: Element, styles: List<StyleElement>) {\n  var firstChild = DOM.firstChild(el);\n  for (var i = styles.length - 1; i >= 0; i--) {\n    var style = styles[i];\n    if (isPresent(firstChild)) {\n      DOM.insertBefore(firstChild, style);\n    } else {\n      DOM.appendChild(el, style);\n    }\n    firstChild = style;\n  }\n}\n\n// TODO(vicb): union types: el is an Element or a Document Fragment\nfunction _addAttributeToChildren(el, attrName:string) {\n  // TODO(vicb): currently the code crashes when the attrName is not an el selector\n  var children = DOM.querySelectorAll(el, \"*\");\n  for (var i = 0; i < children.length; i++) {\n    var child = children[i];\n    DOM.setAttribute(child, attrName, '');\n  }\n}\n","return assert.returnType(($__placeholder__0), $__placeholder__1)","assert.genericType($__placeholder__0)","assert.argumentTypes($__placeholder__0)","assert.type.any","assert.type.$__placeholder__0)","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function($__m) {\n          $__placeholder__0\n        }","$__placeholder__0 = $__m.$__placeholder__1;","var $__placeholder__0 = $__export($__placeholder__1, $__placeholder__2);","function() {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4);\n        }()","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","function($__super) {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4, $__super);\n        }($__placeholder__5)","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","$traceurRuntime.superConstructor(\n          $__placeholder__0).apply(this, arguments)"]}